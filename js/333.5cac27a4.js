"use strict";(self["webpackChunkvue_cli01"]=self["webpackChunkvue_cli01"]||[]).push([[333],{486:function(e,t,l){l.d(t,{Z:function(){return m}});var s=l(3396),a=l(7139),r=l(9242);const o={"aria-hidden":"true",class:"flex overflow-y-auto overflow-x-hidden fixed right-0 left-0 top-4 z-50 justify-center items-center h-modal md:h-full md:inset-0 bg-white bg-opacity-60"},d={class:"relative w-1/3 bg-white rounded-lg shadow-xl"},i={class:"flex justify-between items-start px-8 py-4 rounded-t bg-red-700 border-b border-gray-600"},n=(0,s._)("h3",{class:"text-lg font-semibold lg:text-2xl text-white"},"確認刪除",-1),p=(0,s._)("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),c=[p],u={class:"p-6 flex"},x={class:"text-gray-700 font-bold"},g={class:"flex justify-end items-center px-8 py-4 space-x-2 rounded-b border-t border-gray-600"};function h(e,t,l,p,h,w){return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",d,[(0,s._)("div",i,[n,(0,s._)("button",{type:"button",onClick:t[0]||(t[0]=e=>h.showDeleteModal=!1),class:"text-gray-200 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center","data-modal-toggle":"defaultModal"},c)]),(0,s._)("div",u,[(0,s._)("p",x,"是否刪除 "+(0,a.zw)(l.item.title)+" ? (刪除後無法回覆)",1)]),(0,s._)("div",g,[(0,s._)("button",{"data-modal-toggle":"defaultModal",type:"button",onClick:t[1]||(t[1]=e=>h.showDeleteModal=!1),class:"bg-gray-500 text-white focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-base font-bold px-8 py-2.5 focus:z-10 hover:bg-gray-600"},"取消"),(0,s._)("button",{"data-modal-toggle":"defaultModal",type:"button",onClick:t[2]||(t[2]=(...e)=>w.deleteItem&&w.deleteItem(...e)),class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-bold rounded-lg text-base px-8 py-2.5 text-center"},"確認刪除")])])],512)),[[r.F8,h.showDeleteModal]])}var w={data(){return{temp:{},showDeleteModal:!1}},props:["item"],methods:{deleteItem(){this.$emit("delete-item")}}},f=l(89);const b=(0,f.Z)(w,[["render",h]]);var m=b},35:function(e,t,l){l.d(t,{Z:function(){return h}});var s=l(3396),a=l(7139),r=l(9242);const o={class:"flex justify-center pt-4 pb-20"},d={class:"pagination flex font-bold items-center"},i={class:"bg-gray-200 text-white"},n=["onClick"],p={class:"bg-gray-200 text-white"};function c(e,t,l,c,u,x){return(0,s.wg)(),(0,s.iD)("nav",o,[(0,s._)("ul",d,[(0,s._)("li",i,[(0,s._)("a",{class:(0,a.C_)(["flex px-4 py-2 mr-1",[l.pages.has_pre?"text-black hover:text-white hover:bg-gray-700":"text-gray-300"]]),href:"#",onClick:t[0]||(t[0]=(0,r.iM)((t=>x.updatePages(e.page)),["prevent"]))},"＜",2)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pages.total_pages,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"bg-gray-200 text-black",key:e+"page"},[(0,s._)("a",{class:(0,a.C_)(["flex px-4 py-2 hover:bg-gray-700 hover:text-white",{"text-white bg-gray-700":l.pages.current_page==e}]),href:"#",onClick:(0,r.iM)((t=>x.updatePages(e)),["prevent"])},(0,a.zw)(e),11,n)])))),128)),(0,s._)("li",p,[(0,s._)("a",{class:(0,a.C_)(["flex px-4 py-2",[l.pages.has_next?"text-black hover:text-white hover:bg-gray-700":"text-gray-300"]]),href:"#",onClick:t[1]||(t[1]=(0,r.iM)((t=>x.updatePages(e.page)),["prevent"]))},"＞",2)])])])}var u={props:["pages"],methods:{updatePages(e){this.$emit("update-pages",e)}}},x=l(89);const g=(0,x.Z)(u,[["render",c]]);var h=g},8333:function(e,t,l){l.r(t),l.d(t,{default:function(){return Be}});var s=l(3396),a=l(7139),r=l(9242);const o={class:"container mx-auto shrink px-4"},d=(0,s._)("div",{class:"flex items-center justify-between mb-4"},[(0,s._)("h2",{class:"border-l-8 border-sky-700 text-2xl font-bold text-sky-700 leading-none tracking-wider pl-4"},"訂單管理")],-1),i={class:"w-full"},n=(0,s._)("tr",{class:"text-base bg-sky-700 text-white"},[(0,s._)("th",{class:"w-1/12 flex-shrink-0 py-3"},[(0,s._)("p",null,"購買時間")]),(0,s._)("th",{class:"w-3/12 py-3"},[(0,s._)("p",null,"Email")]),(0,s._)("th",{class:"w-3/12 py-3"},[(0,s._)("p",{class:"text-left"},"購買品項")]),(0,s._)("th",{class:"w-1/12 py-3"},[(0,s._)("p",null,"應付金額")]),(0,s._)("th",{class:"w-2/12 py-3"},[(0,s._)("p",null,"是否付款")]),(0,s._)("th",{class:"w-3/12 py-3"},[(0,s._)("p",null,"動作")])],-1),p={class:"w-1/12 py-3 px-1"},c={class:"w-3/12 py-3 px-1"},u={class:"w-3/12 py-3 px-1"},x={class:"list-disc"},g={class:"text-left"},h={class:"ml-2"},w={class:"w-1/12 py-3 px-1"},f={class:"w-2/12 py-3 px-1"},b={class:"flex-row items-start"},m=["for"],_={class:"relative"},y=["id","onChange","onUpdate:modelValue"],v=(0,s._)("div",{class:"block bg-white w-14 h-8 rounded-full border"},null,-1),M=(0,s._)("div",{class:"dot absolute left-1 top-1 bg-gray-200 w-6 h-6 rounded-full transition"},null,-1),k={class:"w-3/12 py-3 px-1"},O=["onClick"],D=["onClick"];function z(e,t,l,z,C,L){const $=(0,s.up)("PaginationComponent"),P=(0,s.up)("OrderModal"),j=(0,s.up)("DeleteModal"),F=(0,s.up)("VLoading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",o,[d,(0,s._)("table",i,[(0,s._)("tbody",null,[n,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.orders,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"text-center odd:bg-gray-100 text-gray-500 font-bold"},[(0,s._)("td",p,[(0,s._)("p",null,(0,a.zw)(e.$timeFormat.formatTime(t.create_at)),1)]),(0,s._)("td",c,[(0,s._)("p",null,(0,a.zw)(t.user.email),1)]),(0,s._)("td",u,[(0,s._)("ul",x,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.products,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.product.id},[(0,s._)("p",g,[(0,s.Uk)((0,a.zw)(e.product.title)+" ：",1),(0,s._)("span",h,(0,a.zw)(e.qty)+" "+(0,a.zw)(e.product.unit),1)])])))),128))])]),(0,s._)("td",w,[(0,s._)("p",null,(0,a.zw)(t.total),1)]),(0,s._)("td",f,[(0,s._)("div",b,[(0,s._)("label",{for:t.id+"paid",class:"inline-flex items-center justify-center"},[(0,s._)("div",_,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:t.id+"paid",class:"sr-only",onChange:e=>L.updateOrderPaid(t),"true-value":!0,"false-value":!1,"onUpdate:modelValue":e=>t.is_paid=e},null,40,y),[[r.e8,t.is_paid]]),v,M])],8,m)])]),(0,s._)("td",k,[(0,s._)("button",{type:"button",class:"bg-slate-300 font-bold rounded px-4 py-2 mx-2",onClick:e=>L.openFormModal("edit",t)}," 檢視 ",8,O),(0,s._)("button",{type:"button",class:"bg-red-700 text-white font-bold rounded px-4 py-2 mx-2",onClick:e=>L.openFormModal("delete",t)}," 刪除 ",8,D)])])))),128))])])]),(0,s.Wm)($,{pages:C.pagination,onUpdatePages:L.getOrders},null,8,["pages","onUpdatePages"]),(0,s.Wm)(P,{ref:"orderModal",onUpdateOrderPaid:L.updateOrderPaid,"temp-order":C.tempOrder},null,8,["onUpdateOrderPaid","temp-order"]),(0,s.Wm)(j,{onDeleteItem:L.deleteOrder,item:C.tempOrder,ref:"deleteModal"},null,8,["onDeleteItem","item"]),(0,s.Wm)(F,{active:C.isLoading},null,8,["active"])],64)}var C=l(486);const L={id:"defaultModal","aria-hidden":"true",class:"flex overflow-y-auto overflow-x-hidden fixed right-0 left-0 top-4 z-50 justify-center items-center h-modal md:h-full md:inset-0 bg-white bg-opacity-60"},$={class:"flex justify-between items-start px-8 py-4 rounded-t border-b border-gray-600"},P=(0,s._)("h3",{class:"text-lg font-semibold lg:text-2xl text-white"},"訂單內容",-1),j=(0,s._)("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),F=[j],U={class:"p-6 flex items-start"},Z={key:0,class:"flex flex-col w-1/3 p-4 bg-white bg-opacity-30 rounded"},H=(0,s._)("h2",{class:"text-white font-bold text-xl text-left mb-4"},"用戶資料",-1),I={class:"w-full flex mb-1"},V=(0,s._)("p",{class:"text-white font-bold mr-2 text-base w-16 text-left"},"姓名 : ",-1),W={class:"text-white text-base"},Y={class:"w-full flex mb-1"},K=(0,s._)("p",{class:"text-white font-bold mr-2 text-base w-16 text-left"},"Email : ",-1),T={class:"text-white"},q={class:"w-full flex mb-1"},B=(0,s._)("p",{class:"text-white font-bold mr-2 text-base w-16 text-left"},"電話 : ",-1),E={class:"text-white"},N={class:"w-full flex mb-1"},S=(0,s._)("p",{class:"text-white font-bold mr-2 text-base w-16 text-left"},"地址 : ",-1),A={class:"text-white"},G={class:"w-2/3 ml-4 px-4 overflow-y-auto"},J=(0,s._)("h2",{class:"text-white font-bold text-xl text-left mb-4"},"訂單細節",-1),Q={class:"w-full flex mb-1"},R=(0,s._)("p",{class:"text-white font-bold mr-2 text-base w-24 text-left"},"訂單編號 : ",-1),X={class:"text-white text-base"},ee={class:"w-full flex mb-1"},te=(0,s._)("p",{class:"text-white font-bold mr-2 text-base w-24 text-left"},"下單時間 : ",-1),le={class:"text-white"},se={class:"w-full flex mb-1"},ae=(0,s._)("p",{class:"text-white font-bold mr-2 text-base w-24 text-left"},"付款時間 : ",-1),re={key:0,class:"text-white"},oe={key:1,class:"text-white"},de={class:"w-full flex mb-1"},ie=(0,s._)("p",{class:"text-white font-bold mr-2 text-base w-24 text-left"},"付款狀態 : ",-1),ne={key:0},pe=(0,s._)("span",{class:"text-green-300"},"已付款",-1),ce=[pe],ue={key:1},xe=(0,s._)("span",{class:"text-white"},"未付款",-1),ge=[xe],he={class:"w-full flex mb-1"},we=(0,s._)("p",{class:"text-white font-bold mr-2 text-base w-24 text-left"},"總金額 : ",-1),fe={class:"text-white"},be={class:"w-full flex items-center mt-2 mb-1"},me=(0,s._)("label",{class:"text-white font-bold mr-2 text-base w-24 text-left"},"是否付款",-1),_e={class:"flex-row items-start"},ye={for:"is_paid",class:"flex items-center"},ve={class:"relative"},Me=(0,s._)("div",{class:"block bg-white w-14 h-8 rounded-full border"},null,-1),ke=(0,s._)("div",{class:"dot absolute left-1 top-1 bg-gray-200 w-6 h-6 rounded-full transition"},null,-1),Oe=(0,s._)("br",null,null,-1),De=(0,s._)("br",null,null,-1),ze=(0,s._)("h2",{class:"text-white font-bold text-xl text-left mb-4"},"選購商品",-1),Ce={class:"list-disc"},Le={class:"text-left text-white text-base w-2/4"},$e={class:"text-right text-white text-base w-1/4"},Pe={class:"text-right text-white text-base w-1/4"},je=(0,s._)("br",null,null,-1),Fe=(0,s._)("br",null,null,-1),Ue={class:"flex justify-end items-center p-6 space-x-2 rounded-b border-t border-gray-600"},Ze=(0,s._)("button",{"data-modal-toggle":"defaultModal",type:"submit",class:"font-bold text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 rounded-lg text-base px-8 py-2.5 text-center"},"修改付款狀態",-1);function He(e,t,l,o,d,i){const n=(0,s.up)("VLoading");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",L,[(0,s._)("form",{class:"relative w-2/3 rounded-lg shadow bg-gray-700",onSubmit:t[3]||(t[3]=(0,r.iM)((t=>e.$emit("updateOrderPaid",d.temp)),["prevent"]))},[(0,s._)("div",$,[P,(0,s._)("button",{type:"button",onClick:t[0]||(t[0]=e=>d.showOrderModal=!1),class:"text-gray-400 bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center hover:bg-gray-600 hover:text-white","data-modal-toggle":"defaultModal"},F)]),(0,s._)("div",U,[d.temp.user?((0,s.wg)(),(0,s.iD)("div",Z,[H,(0,s._)("div",I,[V,(0,s._)("p",W,(0,a.zw)(d.temp.user.name),1)]),(0,s._)("div",Y,[K,(0,s._)("p",T,(0,a.zw)(d.temp.user.email),1)]),(0,s._)("div",q,[B,(0,s._)("p",E,(0,a.zw)(d.temp.user.tel),1)]),(0,s._)("div",N,[S,(0,s._)("p",A,(0,a.zw)(d.temp.user.address),1)])])):(0,s.kq)("",!0),(0,s._)("div",G,[J,(0,s._)("div",Q,[R,(0,s._)("p",X,(0,a.zw)(d.temp.id),1)]),(0,s._)("div",ee,[te,(0,s._)("p",le,(0,a.zw)(e.$timeFormat.formatTime(d.temp.create_at)),1)]),(0,s._)("div",se,[ae,l.tempOrder.paid_date?((0,s.wg)(),(0,s.iD)("p",re,(0,a.zw)(e.$timeFormat.formatTime(l.tempOrder.paid_date)),1)):((0,s.wg)(),(0,s.iD)("p",oe,"時間不正確"))]),(0,s._)("div",de,[ie,d.temp.is_paid?((0,s.wg)(),(0,s.iD)("p",ne,ce)):((0,s.wg)(),(0,s.iD)("p",ue,ge))]),(0,s._)("div",he,[we,(0,s._)("p",fe,"NT$ "+(0,a.zw)(d.temp.total),1)]),(0,s._)("div",be,[me,(0,s._)("div",_e,[(0,s._)("label",ye,[(0,s._)("div",ve,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"is_paid",class:"sr-only","true-value":!0,"false-value":!1,"onUpdate:modelValue":t[1]||(t[1]=e=>d.temp.is_paid=e)},null,512),[[r.e8,d.temp.is_paid]]),Me,ke])])])]),Oe,De,ze,(0,s._)("ul",Ce,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.temp.products,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.product.id,class:"flex border-b py-1"},[(0,s._)("p",Le,(0,a.zw)(e.product.title),1),(0,s._)("p",$e,(0,a.zw)(e.qty)+(0,a.zw)(e.product.unit),1),(0,s._)("p",Pe,"共 "+(0,a.zw)(e.total)+" 元",1)])))),128))]),je,Fe])]),(0,s._)("div",Ue,[(0,s._)("button",{"data-modal-toggle":"defaultModal",type:"button",onClick:t[2]||(t[2]=e=>d.showOrderModal=!1),class:"font-bold bg-gray-500 text-white focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-base px-8 py-2.5 focus:z-10 hover:bg-gray-600"},"取消"),Ze])],32),(0,s.Wm)(n,{active:d.isLoading},null,8,["active"])],512)),[[r.F8,d.showOrderModal]])}var Ie={data(){return{temp:{},showOrderModal:!1,isLoading:!1}},props:["tempOrder","title"],watch:{tempOrder(){this.temp=this.tempOrder}}},Ve=l(89);const We=(0,Ve.Z)(Ie,[["render",He]]);var Ye=We,Ke=l(35),Te={data(){return{orders:{},tempOrder:{},pagination:{},isLoading:!1}},components:{DeleteModal:C.Z,PaginationComponent:Ke.Z,OrderModal:Ye},methods:{getOrders(e=1){this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/orders/?page=${e}`).then((e=>{this.orders=e.data.orders,this.pagination=e.data.pagination})).catch((e=>{this.alertMessage(e.response.data.message,"error")}))},deleteOrder(){this.isLoading=!0,this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/order/${this.tempOrder.id}`).then((e=>{this.alertMessage(e.data.message,"success"),this.$refs.deleteModal.showDeleteModal=!1,this.getOrders(),this.isLoading=!1})).catch((e=>{this.alertMessage(e.response.data.message,"error")}))},updateOrderPaid(e){this.isLoading=!0,this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/order/${e.id}`,{data:e}).then((e=>{this.alertMessage(e.data.message,"success"),this.$refs.orderModal.showOrderModal=!1,this.getOrders(),this.isLoading=!1})).catch((e=>{this.alertMessage(e.response.data.message,"error")}))},openFormModal(e,t){this.tempOrder={...t},"edit"===e?(console.log("edit"),this.$refs.orderModal.showOrderModal=!0):"delete"===e&&(this.$refs.deleteModal.showDeleteModal=!0)}},mounted(){this.getOrders()}};const qe=(0,Ve.Z)(Te,[["render",z]]);var Be=qe}}]);
//# sourceMappingURL=333.5cac27a4.js.map
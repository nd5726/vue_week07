"use strict";(self["webpackChunkvue_cli01"]=self["webpackChunkvue_cli01"]||[]).push([[880],{486:function(e,t,l){l.d(t,{Z:function(){return w}});var a=l(3396),o=l(7139),s=l(9242);const r={"aria-hidden":"true",class:"flex overflow-y-auto overflow-x-hidden fixed right-0 left-0 top-4 z-50 justify-center items-center h-modal md:h-full md:inset-0 bg-white bg-opacity-60"},i={class:"relative w-1/3 bg-white rounded-lg shadow-xl"},d={class:"flex justify-between items-start px-8 py-4 rounded-t bg-red-700 border-b border-gray-600"},n=(0,a._)("h3",{class:"text-lg font-semibold lg:text-2xl text-white"},"確認刪除",-1),p=(0,a._)("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[(0,a._)("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),c=[p],u={class:"p-6 flex"},g={class:"text-gray-700 font-bold"},m={class:"flex justify-end items-center px-8 py-4 space-x-2 rounded-b border-t border-gray-600"};function h(e,t,l,p,h,x){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",i,[(0,a._)("div",d,[n,(0,a._)("button",{type:"button",onClick:t[0]||(t[0]=e=>h.showDeleteModal=!1),class:"text-gray-200 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center","data-modal-toggle":"defaultModal"},c)]),(0,a._)("div",u,[(0,a._)("p",g,"是否刪除 "+(0,o.zw)(l.item.title)+" ? (刪除後無法回覆)",1)]),(0,a._)("div",m,[(0,a._)("button",{"data-modal-toggle":"defaultModal",type:"button",onClick:t[1]||(t[1]=e=>h.showDeleteModal=!1),class:"bg-gray-500 text-white focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-base font-bold px-8 py-2.5 focus:z-10 hover:bg-gray-600"},"取消"),(0,a._)("button",{"data-modal-toggle":"defaultModal",type:"button",onClick:t[2]||(t[2]=(...e)=>x.deleteItem&&x.deleteItem(...e)),class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-bold rounded-lg text-base px-8 py-2.5 text-center"},"確認刪除")])])],512)),[[s.F8,h.showDeleteModal]])}var x={data(){return{temp:{},showDeleteModal:!1}},props:["item"],methods:{deleteItem(){this.$emit("delete-item")}}},f=l(89);const b=(0,f.Z)(x,[["render",h]]);var w=b},35:function(e,t,l){l.d(t,{Z:function(){return h}});var a=l(3396),o=l(7139),s=l(9242);const r={class:"flex justify-center pt-4 pb-20"},i={class:"pagination flex font-bold items-center"},d={class:"bg-gray-200 text-white"},n=["onClick"],p={class:"bg-gray-200 text-white"};function c(e,t,l,c,u,g){return(0,a.wg)(),(0,a.iD)("nav",r,[(0,a._)("ul",i,[(0,a._)("li",d,[(0,a._)("a",{class:(0,o.C_)(["flex px-4 py-2 mr-1",[l.pages.has_pre?"text-black hover:text-white hover:bg-gray-700":"text-gray-300"]]),href:"#",onClick:t[0]||(t[0]=(0,s.iM)((t=>g.updatePages(e.page)),["prevent"]))},"＜",2)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.pages.total_pages,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"bg-gray-200 text-black",key:e+"page"},[(0,a._)("a",{class:(0,o.C_)(["flex px-4 py-2 hover:bg-gray-700 hover:text-white",{"text-white bg-gray-700":l.pages.current_page==e}]),href:"#",onClick:(0,s.iM)((t=>g.updatePages(e)),["prevent"])},(0,o.zw)(e),11,n)])))),128)),(0,a._)("li",p,[(0,a._)("a",{class:(0,o.C_)(["flex px-4 py-2",[l.pages.has_next?"text-black hover:text-white hover:bg-gray-700":"text-gray-300"]]),href:"#",onClick:t[1]||(t[1]=(0,s.iM)((t=>g.updatePages(e.page)),["prevent"]))},"＞",2)])])])}var u={props:["pages"],methods:{updatePages(e){this.$emit("update-pages",e)}}},g=l(89);const m=(0,g.Z)(u,[["render",c]]);var h=m},4880:function(e,t,l){l.r(t),l.d(t,{default:function(){return ke}});var a=l(3396),o=l(7139);const s={class:"container mx-auto shrink px-4"},r={class:"flex items-center justify-between mb-4"},i=(0,a._)("h2",{class:"border-l-8 border-slate-600 text-2xl font-bold text-slate-600 leading-none tracking-wider pl-4"},"產品管理",-1),d={class:"w-full"},n=(0,a._)("tr",{class:"text-base bg-slate-600 text-white"},[(0,a._)("th",{class:"w-2/12 flex-shrink-0 py-3 px-4 text-left"},[(0,a._)("p",null,"產品分類")]),(0,a._)("th",{class:"w-4/12 flex-shrink-0 py-3 px-4 text-left"},[(0,a._)("p",null,"產品名稱")]),(0,a._)("th",{class:"w-1/12 py-3 px-4"},[(0,a._)("p",null,"原價")]),(0,a._)("th",{class:"w-1/12 py-3 px-4"},[(0,a._)("p",null,"售價")]),(0,a._)("th",{class:"w-1/12 py-3 px-4"},[(0,a._)("p",null,"是否啟用")]),(0,a._)("th",{class:"w-3/12 py-3 px-4"},[(0,a._)("p",null,"動作")])],-1),p={class:"w-2/12 py-3 px-4 text-left"},c={class:"w-4/12 py-3 px-4 text-left"},u={class:"w-1/12 py-3 px-4"},g={class:"w-1/12 py-3 px-4"},m={class:"w-1/12 py-3 px-4"},h={key:0},x=(0,a._)("span",{class:"text-green-600"},"啟用",-1),f=[x],b={key:1},w=(0,a._)("span",{class:"text-black"},"未啟用",-1),y=[w],_={class:"w-3/12 py-3 px-4"},v=["onClick"],M=["onClick"],k={class:"font-bold text-slate-500 my-4 text-right tracking-wider"};function P(e,t,l,x,w,P){const U=(0,a.up)("PaginationComponent"),D=(0,a.up)("ProductModal"),C=(0,a.up)("DeleteModal"),L=(0,a.up)("VLoading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",s,[(0,a._)("div",r,[i,(0,a._)("button",{class:"block text-white text-lg font-bold bg-slate-600 hover:bg-slate-800 focus:ring-4 focus:ring-slate-300 rounded-lg px-8 py-2 text-center",type:"button","data-modal-toggle":"defaultModal",onClick:t[0]||(t[0]=t=>P.openFormModal("new",e.item))},"新增產品")]),(0,a._)("table",d,[(0,a._)("tbody",null,[n,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.products,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.name,class:"text-center odd:bg-gray-100 text-gray-500 font-bold"},[(0,a._)("td",p,[(0,a._)("p",null,(0,o.zw)(e.category),1)]),(0,a._)("td",c,[(0,a._)("p",null,(0,o.zw)(e.title),1)]),(0,a._)("td",u,[(0,a._)("p",null,(0,o.zw)(e.origin_price),1)]),(0,a._)("td",g,[(0,a._)("p",null,(0,o.zw)(e.price),1)]),(0,a._)("td",m,[e.is_enabled?((0,a.wg)(),(0,a.iD)("p",h,f)):((0,a.wg)(),(0,a.iD)("p",b,y))]),(0,a._)("td",_,[(0,a._)("button",{type:"button",class:"bg-slate-300 font-bold rounded px-4 py-2 mx-2",onClick:t=>P.openFormModal("edit",e)}," 編輯 ",8,v),(0,a._)("button",{type:"button",class:"bg-red-700 text-white font-bold rounded px-4 py-2 mx-2",onClick:t=>P.openFormModal("delete",e)}," 刪除 ",8,M)])])))),128))])]),(0,a._)("p",k,"目前有 "+(0,o.zw)(w.products.length)+" 項產品",1)]),(0,a.Wm)(U,{pages:w.pagination,onUpdatePages:P.getProducts},null,8,["pages","onUpdatePages"]),(0,a.Wm)(D,{title:w.productmodalTitle,onUpdateProduct:P.updateProduct,onAddImage:P.addImage,"temp-product":w.tempProduct,ref:"productModal"},null,8,["title","onUpdateProduct","onAddImage","temp-product"]),(0,a.Wm)(C,{onDeleteItem:P.deleteProduct,item:w.tempProduct,ref:"deleteModal"},null,8,["onDeleteItem","item"]),(0,a.Wm)(L,{active:w.isLoading},null,8,["active"])],64)}var U=l(9242);const D={id:"defaultModal","aria-hidden":"true",class:"flex overflow-y-auto overflow-x-hidden fixed right-0 left-0 top-4 z-50 justify-center items-center h-modal md:h-full md:inset-0 bg-white bg-opacity-60"},C={class:"flex justify-between items-start px-8 py-4 rounded-t border-b border-gray-600"},L={class:"text-lg font-semibold lg:text-2xl text-white"},F=(0,a._)("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[(0,a._)("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),$=[F],z={class:"p-6 flex"},V={class:"flex flex-wrap w-2/3"},I={class:"w-full flex items-start flex-col mb-2 px-2"},j=(0,a._)("label",{for:"title",class:"text-white"},"標題",-1),Z={class:"w-1/2 flex items-start flex-col mb-3 px-2"},q=(0,a._)("label",{for:"category",class:"text-white"},"分類",-1),W={class:"w-1/2 flex items-start flex-col mb-3 px-2"},A=(0,a._)("label",{for:"unit",class:"text-white"},"單位",-1),H={class:"w-1/2 flex items-start flex-col mb-3 px-2"},N=(0,a._)("label",{for:"origin_price",class:"text-white"},"原價",-1),T={class:"w-1/2 flex items-start flex-col mb-6 px-2"},Y=(0,a._)("label",{for:"price",class:"text-white"},"售價",-1),K={class:"w-full flex items-start flex-col mb-3 px-2"},B=(0,a._)("label",{for:"description",class:"text-white"},"產品描述",-1),S={class:"w-full flex items-start flex-col mb-3 px-2"},E=(0,a._)("label",{for:"content",class:"text-white"},"說明內容",-1),G={class:"w-full flex items-center mb-3 px-2"},J=(0,a._)("label",{class:"text-white mr-4"},"是否啟用",-1),O={class:"flex-row items-start"},Q={for:"is_enabled",class:"flex items-center"},R={class:"relative"},X=(0,a._)("div",{class:"block bg-white w-14 h-8 rounded-full border"},null,-1),ee=(0,a._)("div",{class:"dot absolute left-1 top-1 bg-gray-200 w-6 h-6 rounded-full transition"},null,-1),te={class:"w-1/3 ml-4 p-2 bg-white bg-opacity-30 rounded imglist overflow-y-auto"},le={class:"w-full flex flex-col mb-3 px-2"},ae=(0,a._)("label",{for:"imageUrl",class:"text-white"},"主要圖片",-1),oe={key:0},se=["src","alt"],re={class:"mt-2",action:"/api/thisismycourse2/admin/upload",enctype:"multipart/form-data",method:"post"},ie={class:"px-2"},de=(0,a._)("p",{class:"text-xl font-bold text-white pt-4 pb-2"},"新增其他圖片",-1),ne={key:0},pe=["for"],ce=["id","onUpdate:modelValue"],ue={key:1},ge={class:"flex justify-end items-center p-6 space-x-2 rounded-b border-t border-gray-600"},me=(0,a._)("button",{"data-modal-toggle":"defaultModal",type:"submit",class:"font-bold text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 rounded-lg text-base px-8 py-2.5 text-center"},"送出",-1);function he(e,t,l,s,r,i){const d=(0,a.up)("VLoading");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",D,[(0,a._)("form",{class:"relative w-2/3 rounded-lg shadow bg-gray-700",onSubmit:t[14]||(t[14]=(0,U.iM)((t=>e.$emit("updateProduct",r.temp)),["prevent"]))},[(0,a._)("div",C,[(0,a._)("h3",L,(0,o.zw)(l.title),1),(0,a._)("button",{type:"button",onClick:t[0]||(t[0]=e=>r.showFormModal=!1),class:"text-gray-400 bg-transparentrounded-lg text-sm p-1.5 ml-auto inline-flex items-center hover:bg-gray-600 hover:text-white","data-modal-toggle":"defaultModal"},$)]),(0,a._)("div",z,[(0,a._)("div",V,[(0,a._)("div",I,[j,(0,a.wy)((0,a._)("input",{ype:"text",class:"rounded px-2 py-2 w-full",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>r.temp.title=e),required:""},null,512),[[U.nr,r.temp.title]])]),(0,a._)("div",Z,[q,(0,a.wy)((0,a._)("input",{type:"text",class:"rounded px-2 py-2 w-full",id:"category","onUpdate:modelValue":t[2]||(t[2]=e=>r.temp.category=e),required:""},null,512),[[U.nr,r.temp.category]])]),(0,a._)("div",W,[A,(0,a.wy)((0,a._)("input",{type:"text",class:"rounded px-2 py-2 w-full",id:"unit","onUpdate:modelValue":t[3]||(t[3]=e=>r.temp.unit=e),required:""},null,512),[[U.nr,r.temp.unit]])]),(0,a._)("div",H,[N,(0,a.wy)((0,a._)("input",{type:"number",class:"rounded px-2 py-2 w-full",id:"origin_price","onUpdate:modelValue":t[4]||(t[4]=e=>r.temp.origin_price=e),required:""},null,512),[[U.nr,r.temp.origin_price]])]),(0,a._)("div",T,[Y,(0,a.wy)((0,a._)("input",{type:"number",class:"rounded px-2 py-2 w-full",id:"price","onUpdate:modelValue":t[5]||(t[5]=e=>r.temp.price=e),required:""},null,512),[[U.nr,r.temp.price]])]),(0,a._)("div",K,[B,(0,a.wy)((0,a._)("textarea",{class:"rounded px-2 py-2 w-full",id:"description","onUpdate:modelValue":t[6]||(t[6]=e=>r.temp.description=e)},null,512),[[U.nr,r.temp.description]])]),(0,a._)("div",S,[E,(0,a.wy)((0,a._)("textarea",{class:"rounded px-2 py-2 w-full",id:"content","onUpdate:modelValue":t[7]||(t[7]=e=>r.temp.content=e)},null,512),[[U.nr,r.temp.content]])]),(0,a._)("div",G,[J,(0,a._)("div",O,[(0,a._)("label",Q,[(0,a._)("div",R,[(0,a.wy)((0,a._)("input",{type:"checkbox",id:"is_enabled",class:"sr-only","true-value":1,"false-value":0,"onUpdate:modelValue":t[8]||(t[8]=e=>r.temp.is_enabled=e)},null,512),[[U.e8,r.temp.is_enabled]]),X,ee])])])])]),(0,a._)("div",te,[(0,a._)("div",le,[ae,l.tempProduct.imageUrl?((0,a.wg)(),(0,a.iD)("div",oe,[(0,a._)("img",{class:"mt-2",src:l.tempProduct.imageUrl,alt:l.tempProduct.title},null,8,se)])):(0,a.kq)("",!0),(0,a._)("form",re,[(0,a._)("input",{id:"file",type:"file",name:"file-to-upload",onChange:t[9]||(t[9]=(...e)=>i.imgupload&&i.imgupload(...e))},null,32)])]),(0,a._)("div",ie,[de,Array.isArray(r.temp.imagesUrl)?((0,a.wg)(),(0,a.iD)("div",ne,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.temp.imagesUrl,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"w-full flex flex-col mb-3",key:t},[(0,a._)("label",{for:t,class:"text-white"},"圖片網址",8,pe),(0,a.wy)((0,a._)("input",{type:"text",class:"rounded px-2 py-2",id:t,"onUpdate:modelValue":e=>r.temp.imagesUrl[t]=e},null,8,ce),[[U.nr,r.temp.imagesUrl[t]]])])))),128)),!r.temp.imagesUrl.length||r.temp.imagesUrl[l.tempProduct.imagesUrl.length-1]?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",onClick:t[10]||(t[10]=e=>r.temp.imagesUrl.push("")),class:"bg-gray-500 text-white w-full py-2 rounded border-2 transition-colors ease-linear hover:bg-gray-700"},"新增圖片")):((0,a.wg)(),(0,a.iD)("button",{key:1,type:"button",onClick:t[11]||(t[11]=e=>r.temp.imagesUrl.pop()),class:"bg-red-700 text-white w-full py-2 rounded border-2 border-red-700 transition-colors ease-linear hover:bg-red-900"},"刪除最後一筆"))])):((0,a.wg)(),(0,a.iD)("div",ue,[(0,a._)("button",{type:"button",onClick:t[12]||(t[12]=t=>e.$emit("addImage")),class:"bg-gray-500 text-white w-full py-2 rounded border-2 transition-colors ease-linear hover:bg-gray-700"},"新增圖片")]))])])]),(0,a._)("div",ge,[(0,a._)("button",{"data-modal-toggle":"defaultModal",type:"button",onClick:t[13]||(t[13]=e=>r.showFormModal=!1),class:"font-bold bg-gray-500 text-white focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-base px-8 py-2.5 focus:z-10 hover:bg-gray-600"},"取消"),me])],32),(0,a.Wm)(d,{active:r.isLoading},null,8,["active"])],512)),[[U.F8,r.showFormModal]])}var xe={data(){return{temp:{},showFormModal:!1,isLoading:!1}},props:["tempProduct","title"],watch:{tempProduct(){this.temp=this.tempProduct}},methods:{imgupload(){this.isLoading=!0;const e=document.querySelector("#file"),t=e.files[0],l=new FormData;l.append("file-to-upload",t),this.$http.post("https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/upload",l).then((e=>{this.temp.imageUrl=e.data.imageUrl,this.isLoading=!1})).catch((e=>{alert(e.response.data.message)}))}}},fe=l(89);const be=(0,fe.Z)(xe,[["render",he]]);var we=be,ye=l(486),_e=l(35),ve={data(){return{products:[],pagination:[],tempProduct:{imagesUrl:[]},isNew:!1,isLoading:!1,productmodalTitle:""}},components:{ProductModal:we,DeleteModal:ye.Z,PaginationComponent:_e.Z},methods:{getProducts(e=1){this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/products/?page=${e}`).then((e=>{this.products=e.data.products,this.pagination=e.data.pagination}))},updateProduct(e){this.isLoading=!0,!1===this.isNew?this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/product/${e.id}`,{data:e}).then((e=>{this.getProducts(),this.closeFormModal(),this.isLoading=!1,this.alertMessage(e.data.message,"success")})).catch((e=>{this.alertMessage(e.response.data.message,"error")})):this.$http.post("https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/product",{data:e}).then((e=>{this.alertMessage(e.data.message,"success"),this.getProducts(),this.closeFormModal(),this.isLoading=!1})).catch((e=>{this.alertMessage(e.response.data.message,"error")}))},deleteProduct(){this.isLoading=!0,this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/nd5726-hexschool/admin/product/${this.tempProduct.id}`).then((e=>{this.alertMessage(e.data.message,"success"),this.getProducts(),this.closeDeleteModal(),this.isLoading=!1})).catch((e=>{this.alertMessage(e.response.data.message,"error")}))},addImage(){void 0===this.tempProduct.imagesUrl&&(this.tempProduct.imagesUrl=[]),this.tempProduct.imagesUrl.push("")},openFormModal(e,t){"edit"===e?(this.productmodalTitle="編輯產品",this.tempProduct={...t},this.isNew=!1,this.$refs.productModal.showFormModal=!0):"new"===e?(this.productmodalTitle="新增產品",this.isNew=!0,this.tempProduct={imagesUrl:[]},this.$refs.productModal.showFormModal=!0):(this.tempProduct={...t},this.$refs.deleteModal.showDeleteModal=!0)},closeFormModal(){this.$refs.productModal.showFormModal=!1},closeDeleteModal(){this.$refs.deleteModal.showDeleteModal=!1}},mounted(){this.getProducts()}};const Me=(0,fe.Z)(ve,[["render",P]]);var ke=Me}}]);
//# sourceMappingURL=880.01cce24f.js.map